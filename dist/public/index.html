<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BOOOMERANGS - –£–º–Ω—ã–π AI —á–∞—Ç</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #ff4b2b;
      --primary-light: #ff6347;
      --primary-dark: #e03011;
      --secondary: #6c63ff;
      --secondary-light: #7e76ff;
      --secondary-dark: #5a51de;
      --accent: #27ae60;
      --background: #f9f9f9;
      --card-bg: #ffffff;
      --text: #333;
      --text-light: #666;
      --border: #ddd;
      --shadow: rgba(0, 0, 0, 0.1);
      --gradient: linear-gradient(135deg, #ff4b2b, #ff416c);
    }
    
    @media (prefers-color-scheme: dark) {
      :root {
        --background: #1a1a2e;
        --card-bg: #252538;
        --text: #e6e6e6;
        --text-light: #aaa;
        --border: #40405c;
        --shadow: rgba(0, 0, 0, 0.3);
      }
    }
    
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: 'Montserrat', sans-serif;
    }
    
    body {
      background-color: var(--background);
      color: var(--text);
      line-height: 1.6;
      min-height: 100vh;
    }
    
    .container {
      max-width: 1000px;
      margin: 0 auto;
      padding: 20px;
    }
    
    .header {
      text-align: center;
      padding: 30px 0;
      position: relative;
    }
    
    .logo {
      font-size: 2.5rem;
      font-weight: 800;
      color: transparent;
      background: var(--gradient);
      -webkit-background-clip: text;
      background-clip: text;
      letter-spacing: 1px;
      margin-bottom: 10px;
      position: relative;
      display: inline-block;
    }
    
    .logo::after {
      content: "";
      position: absolute;
      bottom: -2px;
      left: 50%;
      transform: translateX(-50%);
      width: 50%;
      height: 3px;
      background: var(--gradient);
      border-radius: 2px;
    }
    
    .tagline {
      font-size: 1.1rem;
      color: var(--text-light);
      margin-bottom: 10px;
    }
    
    .main {
      display: flex;
      flex-direction: column;
      gap: 30px;
    }
    
    .card {
      background-color: var(--card-bg);
      border-radius: 15px;
      box-shadow: 0 5px 15px var(--shadow);
      padding: 25px;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    
    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 25px var(--shadow);
    }
    
    .card-title {
      font-size: 1.4rem;
      margin-bottom: 15px;
      color: var(--primary);
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .card-title i {
      font-size: 1.5rem;
    }
    
    .input-group {
      margin-bottom: 20px;
    }
    
    label {
      display: block;
      margin-bottom: 8px;
      font-weight: 500;
    }
    
    textarea, input[type="text"] {
      width: 100%;
      padding: 12px 15px;
      border: 1px solid var(--border);
      border-radius: 8px;
      background-color: var(--card-bg);
      color: var(--text);
      font-size: 1rem;
      resize: vertical;
      transition: border-color 0.3s;
      min-height: 100px;
    }
    
    textarea:focus, input[type="text"]:focus {
      outline: none;
      border-color: var(--primary);
    }
    
    button {
      padding: 12px 25px;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
    }
    
    .btn-primary {
      background: var(--gradient);
      color: white;
      box-shadow: 0 4px 10px rgba(255, 75, 43, 0.3);
    }
    
    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 15px rgba(255, 75, 43, 0.4);
    }
    
    .btn-secondary {
      background-color: var(--secondary);
      color: white;
      box-shadow: 0 4px 10px rgba(108, 99, 255, 0.3);
    }
    
    .btn-secondary:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 15px rgba(108, 99, 255, 0.4);
    }
    
    .btn-accent {
      background-color: var(--accent);
      color: white;
    }
    
    .btn-accent:hover {
      background-color: #219653;
    }
    
    button:disabled {
      opacity: 0.7;
      cursor: not-allowed;
      transform: none !important;
    }
    
    .button-group {
      display: flex;
      gap: 10px;
    }
    
    .image-preview {
      margin: 20px 0;
      text-align: center;
      display: none;
    }
    
    .image-preview.active {
      display: block;
    }
    
    .preview-image {
      max-width: 100%;
      border-radius: 8px;
      box-shadow: 0 5px 15px var(--shadow);
    }
    
    .svg-preview {
      margin: 20px 0;
      text-align: center;
      display: none;
      position: relative;
      background-color: #f5f5f5;
      padding: 20px;
      border-radius: 8px;
    }
    
    .svg-preview.active {
      display: block;
    }
    
    .steps {
      display: flex;
      margin: 30px 0;
      position: relative;
    }
    
    .steps::before {
      content: "";
      position: absolute;
      top: 30px;
      left: 0;
      width: 100%;
      height: 3px;
      background-color: var(--border);
      z-index: 1;
    }
    
    .step {
      flex: 1;
      text-align: center;
      position: relative;
      z-index: 2;
    }
    
    .step-number {
      width: 60px;
      height: 60px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      background: var(--card-bg);
      border: 3px solid var(--border);
      margin: 0 auto 15px;
      font-weight: 700;
      font-size: 1.5rem;
      position: relative;
      transition: all 0.3s;
    }
    
    .step.active .step-number {
      border-color: var(--primary);
      background: var(--primary);
      color: white;
      box-shadow: 0 0 0 5px rgba(255, 75, 43, 0.3);
    }
    
    .step.completed .step-number {
      border-color: var(--accent);
      background: var(--accent);
      color: white;
    }
    
    .step-title {
      font-weight: 600;
      margin-bottom: 5px;
    }
    
    .step-description {
      font-size: 0.85rem;
      color: var(--text-light);
    }
    
    .loading-indicator {
      display: none;
      text-align: center;
      margin: 20px 0;
    }
    
    .loading-indicator.active {
      display: block;
    }
    
    .spinner {
      width: 40px;
      height: 40px;
      border: 4px solid rgba(255, 75, 43, 0.2);
      border-left-color: var(--primary);
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin: 0 auto 15px;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    .alert {
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 20px;
      display: none;
    }
    
    .alert.active {
      display: block;
    }
    
    .alert-success {
      background-color: rgba(39, 174, 96, 0.1);
      border: 1px solid rgba(39, 174, 96, 0.3);
      color: #27ae60;
    }
    
    .alert-error {
      background-color: rgba(235, 87, 87, 0.1);
      border: 1px solid rgba(235, 87, 87, 0.3);
      color: #eb5757;
    }
    
    .info-box {
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 20px;
      background-color: rgba(108, 99, 255, 0.1);
      border-left: 4px solid var(--secondary);
    }
    
    .result-actions {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 20px;
    }
    
    footer {
      text-align: center;
      padding: 30px 0;
      margin-top: 50px;
      color: var(--text-light);
      font-size: 0.9rem;
    }
    
    @media (max-width: 768px) {
      .logo {
        font-size: 2rem;
      }
      
      .button-group {
        flex-direction: column;
      }
      
      .step-number {
        width: 50px;
        height: 50px;
        font-size: 1.2rem;
      }
      
      .step-title {
        font-size: 0.9rem;
      }
      
      .step-description {
        font-size: 0.75rem;
      }
    }
  </style>
</head>

<body>
  <div class="container">
    <header class="header">
      <h1 class="logo">BOOOMERANGS</h1>
      <p class="tagline">AI Image Generator & SVG Converter</p>
    </header>
    
    <div class="steps">
      <div class="step active" id="step1">
        <div class="step-number">1</div>
        <h3 class="step-title">–û–ø–∏—à–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</h3>
        <p class="step-description">–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç–æ–≤–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ</p>
      </div>
      <div class="step" id="step2">
        <div class="step-number">2</div>
        <h3 class="step-title">–ì–µ–Ω–µ—Ä–∞—Ü–∏—è</h3>
        <p class="step-description">AI —Å–æ–∑–¥–∞—Å—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</p>
      </div>
      <div class="step" id="step3">
        <div class="step-number">3</div>
        <h3 class="step-title">–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ SVG</h3>
        <p class="step-description">–ü–æ–ª—É—á–∏—Ç–µ –≤–µ–∫—Ç–æ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç</p>
      </div>
    </div>
    
    <main class="main">
      <div class="alert alert-error" id="error-alert"></div>
      <div class="alert alert-success" id="success-alert"></div>
      
      <div class="card">
        <h2 class="card-title">üé® –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π</h2>
        
        <div class="info-box">
          –û–ø–∏—à–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –≤—ã —Ö–æ—Ç–∏—Ç–µ —Å–æ–∑–¥–∞—Ç—å, –∏ –Ω–∞—à–∞ —Å–∏—Å—Ç–µ–º–∞ —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –µ–≥–æ –¥–ª—è –≤–∞—Å. –ó–∞—Ç–µ–º –≤—ã —Å–º–æ–∂–µ—Ç–µ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ SVG —Ñ–æ—Ä–º–∞—Ç.
        </div>
        
        <div class="input-group">
          <label for="image-prompt">–í–≤–µ–¥–∏—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:</label>
          <textarea id="image-prompt" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –∑–∞–∫–∞—Ç –Ω–∞–¥ –≥–æ—Ä–∞–º–∏ —Å –æ—Ç—Ä–∞–∂–µ–Ω–∏–µ–º –≤ –æ–∑–µ—Ä–µ, —Ä–æ–∑–æ–≤–æ–µ –Ω–µ–±–æ, –∞–∫–≤–∞—Ä–µ–ª—å–Ω—ã–π —Å—Ç–∏–ª—å" rows="4"></textarea>
        </div>
        
        <button class="btn-primary" id="generate-btn">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</button>
        
        <div class="loading-indicator" id="loading-indicator">
          <div class="spinner"></div>
          <p>–ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–æ–∂–¥–∏—Ç–µ...</p>
        </div>
        
        <div class="image-preview" id="image-preview">
          <h3>–†–µ–∑—É–ª—å—Ç–∞—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏:</h3>
          <img id="preview-image" src="" alt="–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ" class="preview-image">
          
          <div class="result-actions">
            <button class="btn-secondary" id="convert-btn">–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ SVG</button>
            <button class="btn-accent" id="download-image-btn">–°–∫–∞—á–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</button>
          </div>
        </div>
        
        <div class="loading-indicator" id="conversion-loading">
          <div class="spinner"></div>
          <p>–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –≤ SVG, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–æ–∂–¥–∏—Ç–µ...</p>
        </div>
        
        <div class="svg-preview" id="svg-preview">
          <h3>SVG —Ä–µ–∑—É–ª—å—Ç–∞—Ç:</h3>
          <div id="svg-container"></div>
          
          <div class="result-actions">
            <button class="btn-accent" id="download-svg-btn">–°–∫–∞—á–∞—Ç—å SVG</button>
            <button class="btn-secondary" id="new-image-btn">–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</button>
          </div>
        </div>
      </div>
    </main>
    
    <footer>
      &copy; 2024 BOOOMERANGS - –ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è AI –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ SVG
    </footer>
  </div>
  
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
      const imagePrompt = document.getElementById('image-prompt');
      const generateBtn = document.getElementById('generate-btn');
      const convertBtn = document.getElementById('convert-btn');
      const downloadImageBtn = document.getElementById('download-image-btn');
      const downloadSvgBtn = document.getElementById('download-svg-btn');
      const newImageBtn = document.getElementById('new-image-btn');
      const previewImage = document.getElementById('preview-image');
      const imagePreview = document.getElementById('image-preview');
      const svgPreview = document.getElementById('svg-preview');
      const svgContainer = document.getElementById('svg-container');
      const loadingIndicator = document.getElementById('loading-indicator');
      const conversionLoading = document.getElementById('conversion-loading');
      const errorAlert = document.getElementById('error-alert');
      const successAlert = document.getElementById('success-alert');
      
      // –ü–æ–ª—É—á–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã —à–∞–≥–æ–≤
      const step1 = document.getElementById('step1');
      const step2 = document.getElementById('step2');
      const step3 = document.getElementById('step3');
      
      // –°–ª—É—à–∞—Ç–µ–ª–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –∫–Ω–æ–ø–æ–∫
      generateBtn.addEventListener('click', generateImage);
      convertBtn.addEventListener('click', convertToSVG);
      downloadImageBtn.addEventListener('click', downloadImage);
      downloadSvgBtn.addEventListener('click', downloadSVG);
      newImageBtn.addEventListener('click', resetForm);
      
      // –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è URL —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
      let generatedImageUrl = '';
      // –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è SVG –¥–∞–Ω–Ω—ã—Ö
      let svgData = '';
      
      // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—à–∏–±–æ–∫
      function showError(message) {
        errorAlert.textContent = message;
        errorAlert.classList.add('active');
        successAlert.classList.remove('active');
        
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫—Ä—ã–≤–∞–µ–º —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
        setTimeout(() => {
          errorAlert.classList.remove('active');
        }, 5000);
      }
      
      // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –æ–± —É—Å–ø–µ—Ö–µ
      function showSuccess(message) {
        successAlert.textContent = message;
        successAlert.classList.add('active');
        errorAlert.classList.remove('active');
        
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫—Ä—ã–≤–∞–µ–º —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
        setTimeout(() => {
          successAlert.classList.remove('active');
        }, 5000);
      }
      
      // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
      async function generateImage() {
        const prompt = imagePrompt.value.trim();
        
        if (!prompt) {
          showError('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è');
          return;
        }
        
        // –°–∫—Ä—ã–≤–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
        imagePreview.classList.remove('active');
        svgPreview.classList.remove('active');
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
        loadingIndicator.classList.add('active');
        
        // –ë–ª–æ–∫–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É
        generateBtn.disabled = true;
        
        // –û–±–Ω–æ–≤–ª—è–µ–º —à–∞–≥–∏
        step1.classList.remove('active');
        step1.classList.add('completed');
        step2.classList.add('active');
        step3.classList.remove('active');
        step3.classList.remove('completed');
        
        try {
          // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å –∫ API
          const response = await fetch('/api/generate-image', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify({ prompt })
          });
          
          const data = await response.json();
          
          if (!response.ok) {
            throw new Error(data.message || '–û—à–∏–±–∫–∞ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è');
          }
          
          // –°–æ—Ö—Ä–∞–Ω—è–µ–º URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
          generatedImageUrl = data.imageUrl;
          
          // –ó–∞–≥—Ä—É–∂–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
          previewImage.src = generatedImageUrl;
          previewImage.onload = function() {
            // –°–∫—Ä—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
            loadingIndicator.classList.remove('active');
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–µ–≤—å—é
            imagePreview.classList.add('active');
            
            // –†–∞–∑–±–ª–æ–∫–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É
            generateBtn.disabled = false;
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ
            showSuccess('–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ!');
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —à–∞–≥–∏
            step2.classList.remove('active');
            step2.classList.add('completed');
          };
          
          previewImage.onerror = function() {
            // –°–∫—Ä—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
            loadingIndicator.classList.remove('active');
            
            // –†–∞–∑–±–ª–æ–∫–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É
            generateBtn.disabled = false;
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ—à–∏–±–∫—É
            showError('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è');
            
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —à–∞–≥–∏
            step2.classList.remove('active');
            step1.classList.add('active');
            step1.classList.remove('completed');
          };
        } catch (error) {
          console.error('–û—à–∏–±–∫–∞:', error);
          
          // –°–∫—Ä—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
          loadingIndicator.classList.remove('active');
          
          // –†–∞–∑–±–ª–æ–∫–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É
          generateBtn.disabled = false;
          
          // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ—à–∏–±–∫—É
          showError(`–û—à–∏–±–∫–∞: ${error.message}`);
          
          // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —à–∞–≥–∏
          step2.classList.remove('active');
          step1.classList.add('active');
          step1.classList.remove('completed');
        }
      }
      
      // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤ SVG
      async function convertToSVG() {
        if (!generatedImageUrl) {
          showError('–°–Ω–∞—á–∞–ª–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ');
          return;
        }
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
        conversionLoading.classList.add('active');
        
        // –ë–ª–æ–∫–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É
        convertBtn.disabled = true;
        
        // –û–±–Ω–æ–≤–ª—è–µ–º —à–∞–≥–∏
        step3.classList.add('active');
        
        try {
          // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å –∫ API
          const response = await fetch('/api/convert-svg', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify({ imageUrl: generatedImageUrl })
          });
          
          const data = await response.json();
          
          if (!response.ok) {
            throw new Error(data.message || '–û—à–∏–±–∫–∞ –ø—Ä–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤ SVG');
          }
          
          // –°–æ—Ö—Ä–∞–Ω—è–µ–º SVG –¥–∞–Ω–Ω—ã–µ
          svgData = data.svgData;
          
          // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º SVG
          svgContainer.innerHTML = svgData;
          
          // –°–∫—Ä—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
          conversionLoading.classList.remove('active');
          
          // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–µ–≤—å—é SVG
          svgPreview.classList.add('active');
          
          // –†–∞–∑–±–ª–æ–∫–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É
          convertBtn.disabled = false;
          
          // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ
          showSuccess('–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ –≤ SVG!');
          
          // –û–±–Ω–æ–≤–ª—è–µ–º —à–∞–≥–∏
          step3.classList.remove('active');
          step3.classList.add('completed');
        } catch (error) {
          console.error('–û—à–∏–±–∫–∞:', error);
          
          // –°–∫—Ä—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
          conversionLoading.classList.remove('active');
          
          // –†–∞–∑–±–ª–æ–∫–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É
          convertBtn.disabled = false;
          
          // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ—à–∏–±–∫—É
          showError(`–û—à–∏–±–∫–∞ –ø—Ä–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤ SVG: ${error.message}`);
          
          // –û–±–Ω–æ–≤–ª—è–µ–º —à–∞–≥–∏
          step3.classList.remove('active');
        }
      }
      
      // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
      function downloadImage() {
        if (!generatedImageUrl) {
          showError('–°–Ω–∞—á–∞–ª–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ');
          return;
        }
        
        const link = document.createElement('a');
        link.href = generatedImageUrl;
        link.download = 'booomerangs-image.png';
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
      }
      
      // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è SVG
      function downloadSVG() {
        if (!svgData) {
          showError('–°–Ω–∞—á–∞–ª–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ SVG');
          return;
        }
        
        const blob = new Blob([svgData], { type: 'image/svg+xml' });
        const url = URL.createObjectURL(blob);
        
        const link = document.createElement('a');
        link.href = url;
        link.download = 'booomerangs-image.svg';
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
        
        // –û—Å–≤–æ–±–æ–∂–¥–∞–µ–º —Ä–µ—Å—É—Ä—Å—ã
        URL.revokeObjectURL(url);
      }
      
      // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–±—Ä–æ—Å–∞ —Ñ–æ—Ä–º—ã
      function resetForm() {
        // –û—á–∏—â–∞–µ–º –ø–æ–ª–µ –≤–≤–æ–¥–∞
        imagePrompt.value = '';
        
        // –°–∫—Ä—ã–≤–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
        imagePreview.classList.remove('active');
        svgPreview.classList.remove('active');
        
        // –°–±—Ä–∞—Å—ã–≤–∞–µ–º URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ SVG –¥–∞–Ω–Ω—ã–µ
        generatedImageUrl = '';
        svgData = '';
        
        // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —à–∞–≥–∏
        step1.classList.add('active');
        step1.classList.remove('completed');
        step2.classList.remove('active');
        step2.classList.remove('completed');
        step3.classList.remove('active');
        step3.classList.remove('completed');
        
        // –§–æ–∫—É—Å–∏—Ä—É–µ–º—Å—è –Ω–∞ –ø–æ–ª–µ –≤–≤–æ–¥–∞
        imagePrompt.focus();
      }
    });
  </script>
</body>
</html>