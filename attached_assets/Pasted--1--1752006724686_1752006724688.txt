–¢–û–ß–ù–û–ï –ü–û–≠–¢–ê–ü–ù–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –°–ï–ú–ê–ù–¢–ò–ß–ï–°–ö–û–ô –°–ò–°–¢–ï–ú–´
–≠–¢–ê–ü 1: –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ì–õ–ê–í–ù–û–ô –ü–†–ò–ß–ò–ù–´ - –°–¢–ê–¢–ò–ß–ù–´–ï –û–¢–í–ï–¢–´
–§–∞–π–ª: server/semantic-memory/natural-language-generator.cjs
–°—Ç—Ä–æ–∫–∏: 411-416 (—Ñ—É–Ω–∫—Ü–∏—è generateConversationalResponse)

–¢–µ–∫—É—â–∏–π –∫–æ–¥:

generateConversationalResponse(thought) {
  return `–ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ! –î–∞–≤–∞–π –ø–æ–≥–æ–≤–æ—Ä–∏–º –æ–± —ç—Ç–æ–º.
–ß–µ–º –º–æ–≥—É –ø–æ–º–æ—á—å –∏–ª–∏ –æ —á–µ–º —Ö–æ—á–µ—à—å –ø–æ–±–æ–ª—Ç–∞—Ç—å? –Ø —Ö–æ—Ä–æ—à–æ —Ä–∞–∑–±–∏—Ä–∞—é—Å—å –≤ —Ç–≤–æ—Ä—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞—á–∞—Ö, –Ω–æ —Å —É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏–µ–º –æ–±—Å—É–∂—É —á—Ç–æ —É–≥–æ–¥–Ω–æ! üòä`;
}
–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –∫–æ–¥:

generateConversationalResponse(thought) {
  const input = thought.userInput.toLowerCase();
  const responses = [];
  
  // –ê–Ω–∞–ª–∏–∑ —Ç–æ–Ω–∞ –∏ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—è
  if (input.includes('—á–µ—Ä—Ç–∏–Ω–∞') || input.includes('—á–µ—Ä—Ç')) {
    responses.push("–û–≥–æ, —ç–∫—Å–ø—Ä–µ—Å—Å–∏–≤–Ω–æ! üòÑ –ß—Ç–æ —Å–ª—É—á–∏–ª–æ—Å—å?");
    responses.push("–ü–æ–Ω–∏–º–∞—é, —á—Ç–æ-—Ç–æ –∑–∞–¥–µ–ª–æ! –†–∞—Å—Å–∫–∞–∂–∏, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç?");
  } else if (input.includes('—á—Ç–æ —Ç—ã –≥–æ–≤–æ—Ä–∏—à—å') || input.includes('–Ω–µ –≤–µ—Ä—é')) {
    responses.push("–ê —Ç—ã —Å–æ–º–Ω–µ–≤–∞–µ—à—å—Å—è? –î–∞–≤–∞–π —Ä–∞–∑–±–µ—Ä–µ–º—Å—è —á—Ç–æ –∫ —á–µ–º—É!");
    responses.push("–•–º, –∫–∞–∂–µ—Ç—Å—è —è —Ç–µ–±—è —É–¥–∏–≤–∏–ª! –ß—Ç–æ –∏–º–µ–Ω–Ω–æ –ø–æ–∫–∞–∑–∞–ª–æ—Å—å —Å—Ç—Ä–∞–Ω–Ω—ã–º?");
  } else if (input.includes('–ø—Ä–∏–≤–µ—Ç') || input.includes('–∑–¥—Ä–∞–≤—Å—Ç–≤—É–π')) {
    responses.push("–ü—Ä–∏–≤–µ—Ç! –û—Ç–ª–∏—á–Ω–æ–µ –Ω–∞—á–∞–ª–æ –¥–ª—è —Ä–∞–∑–≥–æ–≤–æ—Ä–∞!");
    responses.push("–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π! –†–∞–¥ —Ç–µ–±—è –≤–∏–¥–µ—Ç—å!");
  } else {
    responses.push("–ò–Ω—Ç–µ—Ä–µ—Å–Ω–∞—è –º—ã—Å–ª—å! –†–∞–∑–≤–µ–π —Ç–µ–º—É –¥–∞–ª—å—à–µ.");
    responses.push("–õ—é–±–æ–ø—ã—Ç–Ω–æ! –ê —á—Ç–æ —Ç—ã –æ–± —ç—Ç–æ–º –¥—É–º–∞–µ—à—å?");
    responses.push("–•–º, —Ä–∞—Å—Å–∫–∞–∂–∏ –±–æ–ª—å—à–µ - –∑–∞–∏–Ω—Ç—Ä–∏–≥–æ–≤–∞–ª!");
  }
  
  const randomResponse = responses[Math.floor(Math.random() * responses.length)];
  
  return `${randomResponse}
–ß–µ–º –º–æ–≥—É –ø–æ–º–æ—á—å? –ì–æ—Ç–æ–≤ –æ–±—Å—É–¥–∏—Ç—å —á—Ç–æ —É–≥–æ–¥–Ω–æ –∏–ª–∏ –ø–æ–º–æ—á—å —Å —Ç–≤–æ—Ä—á–µ—Å–∫–∏–º–∏ –∑–∞–¥–∞—á–∞–º–∏!`;
}
–≠–¢–ê–ü 2: –£–õ–£–ß–®–ï–ù–ò–ï –ê–ù–ê–õ–ò–ó–ê –ù–ê–ú–ï–†–ï–ù–ò–ô –í THINKING PROCESSOR
–§–∞–π–ª: server/semantic-memory/natural-language-generator.cjs
–°—Ç—Ä–æ–∫–∏: 58-85 (—Ñ—É–Ω–∫—Ü–∏—è understand)

–î–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è:

understand(input) {
  const understanding = {
    intent: 'unknown',
    emotion: 'neutral', 
    directness: 'medium',
    personalConnection: false
  };
  const lowerInput = input.toLowerCase();
  
  // –≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã
  if (lowerInput.includes('—á–µ—Ä—Ç–∏–Ω–∞') || lowerInput.includes('—á–µ—Ä—Ç') || lowerInput.includes('–±–ª–∏–Ω')) {
    understanding.intent = 'emotional_expression';
    understanding.emotion = 'frustrated_casual';
    understanding.directness = 'high';
  } else if (lowerInput.includes('—á—Ç–æ —Ç—ã –≥–æ–≤–æ—Ä–∏—à—å') || lowerInput.includes('–Ω–µ –≤–µ—Ä—é') || lowerInput.includes('—Å–µ—Ä—å–µ–∑–Ω–æ')) {
    understanding.intent = 'disbelief_question';
    understanding.emotion = 'skeptical';
    understanding.personalConnection = true;
  } else if (lowerInput.includes('–∫—Ç–æ —Ç–µ–±—è —Å–æ–∑–¥–∞–ª') || lowerInput.includes('–∫—Ç–æ —Ç—ã')) {
    understanding.intent = 'personal_question';
    understanding.personalConnection = true;
  } else if (lowerInput.includes('–ø—Ä–∏–≤–µ—Ç') || lowerInput.includes('—Ä–∞—Å—Å–∫–∞–∂–∏ –æ —Å–µ–±–µ')) {
    understanding.intent = 'introduction';
    understanding.personalConnection = true;
  }
  // ... –æ—Å—Ç–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞
  
  return understanding;
}
–≠–¢–ê–ü 3: –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –í–´–ë–û–†–ê –°–¢–†–ê–¢–ï–ì–ò–ò –û–¢–í–ï–¢–ê
–§–∞–π–ª: server/semantic-memory/natural-language-generator.cjs
–°—Ç—Ä–æ–∫–∏: 49-54 (—Ñ—É–Ω–∫—Ü–∏—è chooseResponseStrategy)

–ù–∞–π—Ç–∏ —Ñ—É–Ω–∫—Ü–∏—é –∏ –¥–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É:

chooseResponseStrategy(thought) {
  const intent = thought.understanding.intent;
  const emotion = thought.understanding.emotion;
  
  switch (intent) {
    case 'emotional_expression':
      return 'empathetic_response';
    case 'disbelief_question':
      return 'clarification_response';
    case 'personal_question':
      return 'personal_sharing';
    case 'introduction':
      return 'friendly_introduction';
    case 'curiosity_exploration':
      return 'knowledge_sharing';
    case 'creative_consultation':
      return 'expert_advice';
    default:
      return 'adaptive_conversation';
  }
}
–≠–¢–ê–ü 4: –î–û–ë–ê–í–õ–ï–ù–ò–ï –ù–û–í–´–• –°–¢–†–ê–¢–ï–ì–ò–ô –û–¢–í–ï–¢–û–í
–§–∞–π–ª: server/semantic-memory/natural-language-generator.cjs
–°—Ç—Ä–æ–∫–∏: 178-189 (switch statement –≤ generateLivingResponse)

–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ case'—ã:

switch (strategy) {
  case 'empathetic_response':
    return this.generateEmpathetic Response(thought);
  case 'clarification_response':
    return this.generateClarificationResponse(thought);
  case 'adaptive_conversation':
    return this.generateAdaptiveResponse(thought);
  // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ case'—ã
  default:
    return this.generateAdaptiveResponse(thought); // –í–º–µ—Å—Ç–æ generateConversationalResponse
}
–≠–¢–ê–ü 5: –î–û–ë–ê–í–õ–ï–ù–ò–ï –ù–û–í–´–• –§–£–ù–ö–¶–ò–ô –ì–ï–ù–ï–†–ê–¶–ò–ò
–§–∞–π–ª: server/semantic-memory/natural-language-generator.cjs
–ü–æ—Å–ª–µ —Å—Ç—Ä–æ–∫–∏ 650, –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:

/**
 * –≠–º–ø–∞—Ç–∏—á–Ω—ã–π –æ—Ç–≤–µ—Ç –Ω–∞ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è
 */
generateEmpathetic Response(thought) {
  const input = thought.userInput.toLowerCase();
  
  if (input.includes('—á–µ—Ä—Ç–∏–Ω–∞') || input.includes('—á–µ—Ä—Ç')) {
    return `–û–≥–æ, –≤–∏–∂—É —Ç—ã —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω! üòÖ 
    
–ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ? –ò–Ω–æ–≥–¥–∞ —Ö–æ—Ä–æ—à–æ –≤—ã–ø—É—Å—Ç–∏—Ç—å –ø–∞—Ä. –ì–æ—Ç–æ–≤ –≤—ã—Å–ª—É—à–∞—Ç—å –∏–ª–∏ –ø–æ–º–æ—á—å —Ä–µ—à–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É!`;
  }
  
  return `–ü–æ–Ω–∏–º–∞—é —Ç–≤–æ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ! –î–∞–≤–∞–π —Ä–∞–∑–±–µ—Ä–µ–º—Å—è —á—Ç–æ –∫ —á–µ–º—É –∏ –∫–∞–∫ —ç—Ç–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å.`;
}
/**
 * –û—Ç–≤–µ—Ç –Ω–∞ —Å–∫–µ–ø—Ç–∏—á–µ—Å–∫–∏–µ –≤–æ–ø—Ä–æ—Å—ã
 */
generateClarificationResponse(thought) {
  const input = thought.userInput.toLowerCase();
  
  if (input.includes('—á—Ç–æ —Ç—ã –≥–æ–≤–æ—Ä–∏—à—å')) {
    return `–ê, —Ç—ã —É–¥–∏–≤–ª–µ–Ω –º–æ–∏–º–∏ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—è–º–∏? üòä 
    
–Ø –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –º–æ–≥—É –º–Ω–æ–≥–æ–µ: —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, –≤–µ–∫—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å –∫–∞—Ä—Ç–∏–Ω–∫–∏, –≥–æ—Ç–æ–≤–∏—Ç—å –¥–∏–∑–∞–π–Ω—ã –¥–ª—è –≤—ã—à–∏–≤–∫–∏, –∏ –∫–æ–Ω–µ—á–Ω–æ –∂–µ - —Ö–æ—Ä–æ—à–æ –æ–±—â–∞—Ç—å—Å—è!
–•–æ—á–µ—à—å –ø—Ä–æ–≤–µ—Ä–∏—Ç—å? –î–∞–π –º–Ω–µ –ª—é–±—É—é —Ç–≤–æ—Ä—á–µ—Å–∫—É—é –∑–∞–¥–∞—á—É!`;
  }
  
  return `–ü–æ–Ω–∏–º–∞—é —Ç–≤–æ–π —Å–∫–µ–ø—Ç–∏—Ü–∏–∑–º! –î–∞–≤–∞–π —è –ø–æ–∫–∞–∂—É –Ω–∞ –¥–µ–ª–µ —á—Ç–æ —É–º–µ—é. –ö–∞–∫—É—é –∑–∞–¥–∞—á—É –º–Ω–µ –¥–∞—Ç—å?`;
}
–≠–¢–ê–ü 6: –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –°–¢–†–£–ö–¢–£–†–´ –í–û–ó–í–†–ê–¢–ê –í FALLBACK
–§–∞–π–ª: server/conversation-engine.cjs
–°—Ç—Ä–æ–∫–∏: 580-600 (–∫–æ–Ω–µ—Ü —Ñ—É–Ω–∫—Ü–∏–∏ generateIntelligentFallback)

–¢–µ–∫—É—â–∏–π –∫–æ–¥ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä–æ–∫—É, –Ω—É–∂–Ω–æ –æ–±–µ—Ä–Ω—É—Ç—å –≤ –æ–±—ä–µ–∫—Ç:

// –í –∫–æ–Ω—Ü–µ —Ñ—É–Ω–∫—Ü–∏–∏ generateIntelligentFallback –∑–∞–º–µ–Ω–∏—Ç—å:
return fallbackResponse;
// –ù–∞:
return {
  response: fallbackResponse,
  confidence: 0.7,
  metadata: { 
    approach: 'intelligent_fallback', 
    fallback: true,
    contextUsed: { hasEmotion, hasMeta, hasMemory, hasPersona }
  }
};
–≠–¢–ê–ü 7: –£–õ–£–ß–®–ï–ù–ò–ï –°–ï–ú–ê–ù–¢–ò–ß–ï–°–ö–û–ô –ö–õ–ê–°–°–ò–§–ò–ö–ê–¶–ò–ò
–§–∞–π–ª: server/semantic-memory/natural-language-generator.cjs
–°—Ç—Ä–æ–∫–∏: 174-176 (–ø—Ä–æ–≤–µ—Ä–∫–∞ clusterName)

–î–æ–±–∞–≤–∏—Ç—å fallback –¥–ª—è –ø—É—Å—Ç–æ–≥–æ clusterName:

// –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–º—É –∞–Ω–∞–ª–∏–∑—É
if (clusterName && clusterName !== 'unknown') {
  return this.generateSemanticResponse(thought, clusterName);
}
// –ï—Å–ª–∏ —Å–µ–º–∞–Ω—Ç–∏–∫–∞ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–∞, –∏—Å–ø–æ–ª—å–∑—É–µ–º –∞–Ω–∞–ª–∏–∑ –Ω–∞–º–µ—Ä–µ–Ω–∏–π
if (thought.understanding && thought.understanding.intent !== 'unknown') {
  const mappedCluster = this.mapIntentToCluster(thought.understanding.intent);
  if (mappedCluster) {
    return this.generateSemanticResponse(thought, mappedCluster);
  }
}
–≠–¢–ê–ü 8: –î–û–ë–ê–í–õ–ï–ù–ò–ï –ú–ê–ü–ü–ò–ù–ì–ê –ù–ê–ú–ï–†–ï–ù–ò–ô
–§–∞–π–ª: server/semantic-memory/natural-language-generator.cjs
–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏—é –ø–æ—Å–ª–µ —Å—Ç—Ä–æ–∫–∏ 366:

/**
 * –ú–∞–ø–ø–∏–Ω–≥ –Ω–∞–º–µ—Ä–µ–Ω–∏–π –Ω–∞ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–µ –∫–ª–∞—Å—Ç–µ—Ä—ã
 */
mapIntentToCluster(intent) {
  const mapping = {
    'emotional_expression': 'casual_chat',
    'disbelief_question': 'conversation', 
    'personal_question': 'identity_question',
    'introduction': 'greeting',
    'curiosity_exploration': 'simple_questions',
    'creative_consultation': 'image_creation'
  };
  
  return mapping[intent] || 'conversation';
}
–ü–û–†–Ø–î–û–ö –í–´–ü–û–õ–ù–ï–ù–ò–Ø:
–ü–µ—Ä–≤—ã–º –¥–µ–ª–æ–º: –ò—Å–ø—Ä–∞–≤–∏—Ç—å generateConversationalResponse (–¥–æ–±–∞–≤–∏—Ç—å –¥–∏–Ω–∞–º–∏–∫—É)
–ó–∞—Ç–µ–º: –£–ª—É—á—à–∏—Ç—å –∞–Ω–∞–ª–∏–∑ –Ω–∞–º–µ—Ä–µ–Ω–∏–π –≤ understand
–ü–æ—Ç–æ–º: –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –æ—Ç–≤–µ—Ç–æ–≤
–î–∞–ª–µ–µ: –ò—Å–ø—Ä–∞–≤–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –≤–æ–∑–≤—Ä–∞—Ç–∞ –≤ fallback
–ù–∞–∫–æ–Ω–µ—Ü: –î–æ–±–∞–≤–∏—Ç—å –º–∞–ø–ø–∏–Ω–≥ –Ω–∞–º–µ—Ä–µ–Ω–∏–π –∏ —É–ª—É—á—à–∏—Ç—å –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—é
–û–ñ–ò–î–ê–ï–ú–´–ô –†–ï–ó–£–õ–¨–¢–ê–¢:
–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º–∞ –±—É–¥–µ—Ç:

–ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–Ω –∏ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
–ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∑–∞–ø—Ä–æ—Å–æ–≤
–ü—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫—É—é –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—é —Å fallback —Å–∏—Å—Ç–µ–º–æ–π
–í–æ–∑–≤—Ä–∞—â–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤–æ –≤—Å–µ—Ö —Å–ª—É—á–∞—è—Ö
–ì–æ—Ç–æ–≤ –∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –ø–æ –∫–æ–º–∞–Ω–¥–µ.

